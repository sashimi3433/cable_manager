{% extends "base.html" %}

{% block content %}
<main class="form">
    <h1>商品検索</h1>

    <!-- 検索フォーム -->
    <form method="GET" action="{% url 'search:results' %}">
        <!-- 商品名テキスト検索 -->
        <label for="name-text">商品名</label>
        <input id="name-text" type="text" name="q" placeholder="商品名で検索" value="{{ q|default:'' }}">

        <!-- メーカーのセレクトボックス -->
        <label for="manufacturer-select">メーカー (任意)</label>
        <select id="manufacturer-select" name="manufacturer">
            <option value="">-- 選択してください --</option>
            {% for manufacturer in manufacturers %}
                <option value="{{ manufacturer }}" {% if manufacturer == selected_manufacturer %}selected{% endif %}>
                    {{ manufacturer }}
                </option>
            {% endfor %}
        </select>

        <button type="submit" class="btn">検索</button>
    </form>

    <!-- 検索結果の表示 -->
    {% if results %}
        <div class="results search">
            <h2>検索結果</h2>
            <ul>
                {% for result in results %}
                    <a href="{% url 'manage:detail' result.id %}">
                        <li class="result">
                            {{ result.name }} ({{ result.Manufacturer|default:"メーカー不明" }})
                        </li>
                    </a>
                {% endfor %}
            </ul>
        </div>
    {% elif q or selected_manufacturer %}
        <!-- 検索結果がない場合 -->
        <p>該当する商品は見つかりませんでした。</p>
    {% endif %}
</main>
{% endblock %}
